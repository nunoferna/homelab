networking:
  hostNetwork: true

podAnnotations:
  vault.hashicorp.com/agent-inject: "true"
  vault.hashicorp.com/role: "pihole"
  # Pre-populate secrets before main container starts
  vault.hashicorp.com/agent-pre-populate-only: "true"
  # Inject secret as a file at /vault/secrets/web-password
  vault.hashicorp.com/agent-inject-secret-web-password: "secret/data/pihole/credentials"
  vault.hashicorp.com/agent-inject-template-web-password: |
    {{ with secret "secret/data/pihole/credentials" -}}
    {{ .Data.data.password }}
    {{- end }}

extraEnv:
  - name: FTLCONF_webserver_api_password
    value: "file:/vault/secrets/web-password"

pihole:
  web:
    password: "file:/vault/secrets/web-password"
  lists:
    adlists:
      # HaGeZi Collections
      - address: https://raw.githubusercontent.com/hagezi/dns-blocklists/main/adblock/gambling.txt
      - address: https://raw.githubusercontent.com/hagezi/dns-blocklists/main/adblock/spam-tlds.txt
      - address: https://raw.githubusercontent.com/hagezi/dns-blocklists/main/adblock/tif.txt
      - address: https://raw.githubusercontent.com/hagezi/dns-blocklists/main/adblock/ultimate.txt

      # Firebog Suspicious Lists
      - address: https://raw.githubusercontent.com/PolishFiltersTeam/KADhosts/master/KADhosts.txt
      - address: https://raw.githubusercontent.com/FadeMind/hosts.extras/master/add.Spam/hosts
      - address: https://v.firebog.net/hosts/static/w3kbl.txt

      # Firebog Advertising Lists
      - address: https://adaway.org/hosts.txt
      - address: https://v.firebog.net/hosts/AdguardDNS.txt
      - address: https://raw.githubusercontent.com/anudeepND/blacklist/master/adservers.txt
      - address: https://v.firebog.net/hosts/Easylist.txt
      - address: https://raw.githubusercontent.com/FadeMind/hosts.extras/master/UncheckyAds/hosts
      # Firebog Tracking & Telemetry Lists
      - address: https://v.firebog.net/hosts/Easyprivacy.txt
      - address: https://v.firebog.net/hosts/Prigent-Ads.txt
      - address: https://raw.githubusercontent.com/FadeMind/hosts.extras/master/add.2o7Net/hosts
      - address: https://raw.githubusercontent.com/crazy-max/WindowsSpyBlocker/master/data/hosts/spy.txt
      - address: https://hostfiles.frogeye.fr/firstparty-trackers-hosts.txt

      # Firebog Malicious Lists
      - address: https://v.firebog.net/hosts/Prigent-Crypto.txt
      - address: https://raw.githubusercontent.com/FadeMind/hosts.extras/master/add.Risk/hosts
    
  ftl:
    dns:
      upstreams:
        - "1.0.0.1"
        - "1.1.1.1"

serviceDns:
  enabled: true
  type: ClusterIP

metrics:
  enabled: true
  env:
    - name: PIHOLE_PASSWORD
      value: "file:/vault/secrets/web-password"
  dashboards:
    enabled: true
  serviceMonitor:
    enabled: true
    labels:
      release: kube-prometheus-stack
