---
# file: roles/cilium/defaults/main.yml

cilium_namespace: kube-system
cilium_chart_repo_name: cilium
cilium_chart_repo_url: https://helm.cilium.io/
cilium_chart_version: 1.18.5
cilium_release_name: cilium

# Gateway API configuration
cilium_gateway_api_version: v1.4.1
cilium_gateway_api_crds_url: "https://github.com/kubernetes-sigs/gateway-api/releases/download/{{ cilium_gateway_api_version }}/standard-install.yaml"

# Cache directory preferences (in order of priority)
cilium_gateway_api_cache_base: >-
  {{ ansible_env.RUNNER_TEMP | default(
     ansible_env.RUNNER_TOOL_CACHE | default(
     ansible_env.XDG_CACHE_HOME | default(
     ansible_env.HOME + '/.cache'))) }}
cilium_gateway_api_cache_dir: "{{ cilium_gateway_api_cache_base }}/homelab/gateway-api/{{ cilium_gateway_api_version }}"
cilium_gateway_api_cache_file: "{{ cilium_gateway_api_cache_dir }}/standard-install.yaml"
cilium_gateway_api_fallback_cache_dir: "/tmp/homelab-gateway-api/{{ cilium_gateway_api_version }}"

# Cilium values file location
cilium_values_file: "{{ playbook_dir }}/../../gitops/apps/cilium/values.yaml"

# Timeouts and retries
cilium_gateway_api_download_retries: 5
cilium_gateway_api_download_delay: 3
cilium_gateway_api_crd_timeout: 5m
cilium_rollout_timeout: 10m
